#!/usr/bin/env fish

if not set gitdir (git rev-parse --git-dir 2>/dev/null)
    echo "Not a git repository" >&2
    return 1
end

if test -f "$gitdir/CHERRY_PICK_HEAD"
    git cherry-pick --abort
else if test -f "$gitdir/MERGE_HEAD"
    git merge --abort
else if test -f "$gitdir/REBASE_HEAD"
    git rebase --abort
else if test -f "$gitdir/REVERT_HEAD"
    git revert --abort
else
    echo "No active operation found" >&2
    return 1
end
